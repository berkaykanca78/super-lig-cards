<div class="stats-wrapper">
    <div class="stats-container">
        <div class="stats-header">
            <h1>2025-2026 S√ºper Lig ƒ∞statistikleri</h1>
            <p>Oyuncu Performans Verileri</p>
        </div>

        <div class="stats-tabs">
            <button class="tab-button active" data-tab="goal-kings">
                <i class="fas fa-futbol"></i>
                Gol Krallƒ±ƒüƒ±
            </button>
            <button class="tab-button" data-tab="assist-kings">
                <i class="fas fa-hands-helping"></i>
                Asist Krallƒ±ƒüƒ±
            </button>
            <button class="tab-button" data-tab="clean-sheets">
                <i class="fas fa-shield-alt"></i>
                Kalesini Gole Kapatanlar            
            </button>
            <button class="tab-button" data-tab="most-cards">
                <i class="fas fa-id-card"></i>
                En √áok Kart G√∂renler
            </button>
            <!--<button class="tab-button" data-tab="most-goals-conceded">
                <i class="fas fa-door-open"></i>
                Kalesini Gole Kapatanlar
            </button>-->
        </div>

        <div class="stats-content mb-5">
            <!-- Goal Kings Tab -->
            <div id="goal-kings" class="tab-content active">
                <div class="tab-header">
                    <h2>üèÜ Gol Krallƒ±ƒüƒ±</h2>
                    <p>En √ßok gol atan oyuncular</p>
                </div>
                
                <!-- Loading and Error States -->
                <div *ngIf="isLoading" class="loading-message">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Veriler y√ºkleniyor...</p>
                </div>
                
                <div *ngIf="error && !isLoading" class="error-message">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p>{{ error }}</p>
                </div>

                <div *ngIf="!isLoading && !error" class="stats-content-wrapper">
                    <div class="stats-controls">
                        <!--<div class="stats-filters">
                            <select id="positionFilter" class="stats-filter" [(ngModel)]="selectedPosition" (change)="onPositionFilterChange()">
                                <option value="">T√ºm Pozisyonlar</option>
                                <option value="GK">Kaleci</option>
                                <option value="DEF">Defans</option>
                                <option value="MID">Orta Saha</option>
                                <option value="FWD">Forvet</option>
                            </select>
                            <select id="teamFilter" class="stats-filter" [(ngModel)]="selectedTeam" (change)="onTeamFilterChange()">
                                <option value="">T√ºm Takƒ±mlar</option>
                                <option *ngFor="let team of availableTeams" [value]="team">{{ team }}</option>
                            </select>
                            <select id="statType" class="stats-filter" [(ngModel)]="selectedStatType" (change)="onStatTypeChange()">
                                <option value="goals">Goller</option>
                                <option value="assists">Asistler</option>
                                <option value="matches">Ma√ßlar</option>
                            </select>
                        </div>-->
                        <!--<button class="refresh-button" (click)="refreshData()" [disabled]="isLoading">
                            <i class="fas fa-sync-alt" [class.fa-spin]="isLoading"></i>
                            Yenile
                        </button>-->
                    </div>

                    <div class="stats-summary">
                        <p>Toplam {{ getTotalPlayers() }} oyuncu bulundu</p>
                        <div *ngIf="getTopPlayer()" class="top-player-info">
                            <span class="top-player-label">üèÜ Lider:</span>
                            <span class="top-player-name">{{ getTopPlayer()?.playerName }}</span>
                            <span class="top-player-team">({{ getTopPlayer()?.club }})</span>
                            <span class="top-player-stat">{{ getStatValue(getTopPlayer()!) }} {{ getStatHeader() }}</span>
                        </div>
                    </div>

                    <div class="stats-table-container">
                        <table class="stats-table">
                            <thead>
                                <tr>
                                    <th>Sƒ±ra</th>
                                    <th>Oyuncu</th>
                                    <th>Takƒ±m</th>
                                    <th>Pozisyon</th>
                                    <th>Ma√ß</th>
                                    <th [innerHTML]="getStatHeader()"></th>
                                </tr>
                            </thead>
                            <tbody id="goalKingsBody">
                                <tr *ngFor="let player of filteredPlayers; let i = index" class="player-row">
                                    <td>{{ i + 1 }}</td>
                                    <td class="player-name">{{ player.playerName }}</td>
                                    <td class="player-team">{{ player.club }}</td>
                                    <td class="player-position">{{ getPositionDisplayName(player.position) }}</td>
                                    <td class="player-matches">{{ player.matches }}</td>
                                    <td class="player-goals">{{ getStatValue(player) }}</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div *ngIf="filteredPlayers.length === 0 && !isLoading && !error" class="no-data-message">
                            <p>Se√ßilen kriterlere uygun oyuncu bulunamadƒ±.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Assist Kings Tab -->
            <div id="assist-kings" class="tab-content">
                <div class="tab-header">
                    <h2>üéØ Asist Krallƒ±ƒüƒ±</h2>
                    <p>En √ßok asist yapan oyuncular</p>
                </div>
                
                <!-- Loading and Error States -->
                <div *ngIf="isLoading" class="loading-message">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Veriler y√ºkleniyor...</p>
                </div>
                
                <div *ngIf="error && !isLoading" class="error-message">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p>{{ error }}</p>
                </div>

                <div *ngIf="!isLoading && !error" class="stats-content-wrapper">
                    <div class="stats-controls">
                        <!--<div class="stats-filters">
                            <select id="positionFilter" class="stats-filter" [(ngModel)]="selectedPosition" (change)="onPositionFilterChange()">
                                <option value="">T√ºm Pozisyonlar</option>
                                <option value="GK">Kaleci</option>
                                <option value="DEF">Defans</option>
                                <option value="MID">Orta Saha</option>
                                <option value="FWD">Forvet</option>
                            </select>
                            <select id="teamFilter" class="stats-filter" [(ngModel)]="selectedTeam" (change)="onTeamFilterChange()">
                                <option value="">T√ºm Takƒ±mlar</option>
                                <option *ngFor="let team of availableTeams" [value]="team">{{ team }}</option>
                            </select>
                            <select id="statType" class="stats-filter" [(ngModel)]="selectedStatType" (change)="onStatTypeChange()">
                                <option value="assists">Asistler</option>
                                <option value="goals">Goller</option>
                                <option value="matches">Ma√ßlar</option>
                            </select>
                        </div>-->
                        <!--<button class="refresh-button" (click)="refreshData()" [disabled]="isLoading">
                            <i class="fas fa-sync-alt" [class.fa-spin]="isLoading"></i>
                            Yenile
                        </button>-->
                    </div>

                    <div class="stats-summary">
                        <p>Toplam {{ getTotalPlayers() }} oyuncu bulundu</p>
                        <div *ngIf="getTopPlayer()" class="top-player-info">
                            <span class="top-player-label">üéØ Lider:</span>
                            <span class="top-player-name">{{ getTopPlayer()?.playerName }}</span>
                            <span class="top-player-team">({{ getTopPlayer()?.club }})</span>
                            <span class="top-player-stat">{{ getStatValue(getTopPlayer()!) }} {{ getStatHeader() }}</span>
                        </div>
                    </div>

                    <div class="stats-table-container">
                        <table class="stats-table">
                            <thead>
                                <tr>
                                    <th>Sƒ±ra</th>
                                    <th>Oyuncu</th>
                                    <th>Takƒ±m</th>
                                    <th>Pozisyon</th>
                                    <th>Ma√ß</th>
                                    <th [innerHTML]="getStatHeader()"></th>
                                </tr>
                            </thead>
                            <tbody id="assistKingsBody">
                                <tr *ngFor="let player of filteredPlayers; let i = index" class="player-row">
                                    <td>{{ i + 1 }}</td>
                                    <td class="player-name">{{ player.playerName }}</td>
                                    <td class="player-team">{{ player.club }}</td>
                                    <td class="player-position">{{ getPositionDisplayName(player.position) }}</td>
                                    <td class="player-matches">{{ player.matches }}</td>
                                    <td class="player-assists">{{ getStatValue(player) }}</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div *ngIf="filteredPlayers.length === 0 && !isLoading && !error" class="no-data-message">
                            <p>Se√ßilen kriterlere uygun oyuncu bulunamadƒ±.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Clean Sheets Tab -->
            <div id="clean-sheets" class="tab-content">
                <div class="tab-header">
                    <h2>üõ°Ô∏è Kalesini Gole Kapatanlar</h2>
                    <p>En az gol yiyen kaleciler</p>
                </div>
                
                <!-- Loading and Error States -->
                <div *ngIf="isLoading" class="loading-message">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Veriler y√ºkleniyor...</p>
                </div>
                
                <div *ngIf="error && !isLoading" class="error-message">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p>{{ error }}</p>
                </div>

                <div *ngIf="!isLoading && !error" class="stats-content-wrapper">
                    <!--<div class="stats-controls">
                        <div class="stats-filters">
                            <select id="positionFilter" class="stats-filter" [(ngModel)]="selectedPosition" (change)="onPositionFilterChange()">
                                <option value="">T√ºm Pozisyonlar</option>
                                <option value="GK">Kaleci</option>
                            </select>
                            <select id="teamFilter" class="stats-filter" [(ngModel)]="selectedTeam" (change)="onTeamFilterChange()">
                                <option value="">T√ºm Takƒ±mlar</option>
                                <option *ngFor="let team of availableTeams" [value]="team">{{ team }}</option>
                            </select>
                            <select id="statType" class="stats-filter" [(ngModel)]="selectedStatType" (change)="onStatTypeChange()">
                                <option value="clean_sheets">Temiz Ma√ß</option>
                                <option value="matches">Ma√ßlar</option>
                            </select>
                        </div>
                        <button class="refresh-button" (click)="refreshData()" [disabled]="isLoading">
                            <i class="fas fa-sync-alt" [class.fa-spin]="isLoading"></i>
                            Yenile
                        </button>
                    </div>-->

                    <div class="stats-summary">
                        <p>Toplam {{ getTotalPlayers() }} oyuncu bulundu</p>
                        <div *ngIf="getTopPlayer()" class="top-player-info">
                            <span class="top-player-label">üõ°Ô∏è Lider:</span>
                            <span class="top-player-name">{{ getTopPlayer()?.playerName }}</span>
                            <span class="top-player-team">({{ getTopPlayer()?.club }})</span>
                            <span class="top-player-stat">{{ getStatValue(getTopPlayer()!) }} {{ getStatHeader() }}</span>
                        </div>
                    </div>

                    <div class="stats-table-container">
                        <table class="stats-table">
                            <thead>
                                <tr>
                                    <th>Sƒ±ra</th>
                                    <th>Oyuncu</th>
                                    <th>Takƒ±m</th>
                                    <th>Pozisyon</th>
                                    <th>Ma√ß</th>
                                    <th [innerHTML]="getStatHeader()"></th>
                                    <th>Y√ºzdesi</th>
                                </tr>
                            </thead>
                            <tbody id="cleanSheetsBody">
                                <tr *ngFor="let player of filteredPlayers; let i = index" class="player-row">
                                    <td>{{ i + 1 }}</td>
                                    <td class="player-name">{{ player.playerName }}</td>
                                    <td class="player-team">{{ player.club }}</td>
                                    <td class="player-position">{{ getPositionDisplayName(player.position) }}</td>
                                    <td class="player-matches">{{ player.matches }}</td>
                                    <td class="player-clean-sheets">{{ player.cleanSheets || 0 }}</td>
                                    <td class="player-goals-conceded">{{ player.goalsConceded || 0 }}</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div *ngIf="filteredPlayers.length === 0 && !isLoading && !error" class="no-data-message">
                            <p>Se√ßilen kriterlere uygun oyuncu bulunamadƒ±.</p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Most Cards Tab -->
            <div id="most-cards" class="tab-content">
                <div class="tab-header">
                    <h2>üü® En √áok Kart G√∂renler</h2>
                    <p>En √ßok sarƒ±/kƒ±rmƒ±zƒ± kart alan oyuncular</p>
                </div>
                
                <!-- Loading and Error States -->
                <div *ngIf="isLoading" class="loading-message">
                    <i class="fas fa-spinner fa-spin"></i>
                    <p>Veriler y√ºkleniyor...</p>
                </div>
                
                <div *ngIf="error && !isLoading" class="error-message">
                    <i class="fas fa-exclamation-triangle"></i>
                    <p>{{ error }}</p>
                </div>

                <div *ngIf="!isLoading && !error" class="stats-content-wrapper">
                    <div class="stats-controls">
                        <!--<div class="stats-filters">
                            <select id="positionFilter" class="stats-filter" [(ngModel)]="selectedPosition" (change)="onPositionFilterChange()">
                                <option value="">T√ºm Pozisyonlar</option>
                                <option value="GK">Kaleci</option>
                                <option value="DEF">Defans</option>
                                <option value="MID">Orta Saha</option>
                                <option value="FWD">Forvet</option>
                            </select>
                            <select id="teamFilter" class="stats-filter" [(ngModel)]="selectedPosition" (change)="onTeamFilterChange()">
                                <option value="">T√ºm Takƒ±mlar</option>
                                <option *ngFor="let team of availableTeams" [value]="team">{{ team }}</option>
                            </select>
                            <select id="statType" class="stats-filter" [(ngModel)]="selectedStatType" (change)="onStatTypeChange()">
                                <option value="totalCards">Toplam Kart</option>
                                <option value="yellowCards">Sarƒ± Kart</option>
                                <option value="redCards">Kƒ±rmƒ±zƒ± Kart</option>
                                <option value="matches">Ma√ßlar</option>
                            </select>
                        </div>
                        <button class="refresh-button" (click)="refreshData()" [disabled]="isLoading">
                            <i class="fas fa-sync-alt" [class.fa-spin]="isLoading"></i>
                            Yenile
                        </button>-->
                    </div>

                    <div class="stats-summary">
                        <p>Toplam {{ getTotalPlayers() }} oyuncu bulundu</p>
                        <div *ngIf="getTopPlayer()" class="top-player-info">
                            <span class="top-player-label">üü® Lider:</span>
                            <span class="top-player-name">{{ getTopPlayer()?.playerName }}</span>
                            <span class="top-player-team">({{ getTopPlayer()?.club }})</span>
                            <span class="top-player-stat">{{ getStatValue(getTopPlayer()!) }} {{ getStatHeader() }}</span>
                        </div>
                    </div>

                    <div class="stats-table-container">
                        <table class="stats-table">
                            <thead>
                                <tr>
                                    <th>Sƒ±ra</th>
                                    <th>Oyuncu</th>
                                    <th>Takƒ±m</th>
                                    <th>Pozisyon</th>
                                    <th>Ma√ß</th>
                                    <th [innerHTML]="getStatHeader()"></th>
                                    <th>Sarƒ± Kart</th>
                                    <th>Kƒ±rmƒ±zƒ± Kart</th>
                                </tr>
                            </thead>
                            <tbody id="mostCardsBody">
                                <tr *ngFor="let player of filteredPlayers; let i = index" class="player-row">
                                    <td>{{ i + 1 }}</td>
                                    <td class="player-name">{{ player.playerName }}</td>
                                    <td class="player-team">{{ player.club }}</td>
                                    <td class="player-position">{{ getPositionDisplayName(player.position) }}</td>
                                    <td class="player-matches">{{ player.matches }}</td>
                                    <td class="player-cards">{{ getStatValue(player) }}</td>
                                    <td class="player-yellow-cards">{{ player.yellowCards || 0 }}</td>
                                    <td class="player-red-cards">{{ player.redCards || 0 }}</td>
                                </tr>
                            </tbody>
                        </table>
                        
                        <div *ngIf="filteredPlayers.length === 0 && !isLoading && !error" class="no-data-message">
                            <p>Se√ßilen kriterlere uygun oyuncu bulunamadƒ±.</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>